@{
	Layout = "_Layout";
}

@section containerContent {
	<head>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.6/dist/flatpickr.min.css">
		<script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.6/dist/flatpickr.min.js"></script>


	</head>
	<h1> Add Income </h1>

	<hr />

	<div class="row">

		<div class="col-md-4 mx-auto">
			<form action="/WebBudget/CreateIncome" method="post">
				<div class="form-group mb-3">
					<label class="control-label" for="IncomeType">
						Income Name
					</label>
					<div class="input-group">
						<input class="form-control bg-light text-white custom-input text-align:center" type="text" id="IncomeType" name="BudgetIncome.IncomeType" placeholder="Provide income type" />
						<div class="input-group-append">
							<button class="btn btn-secondary" type="button" id="toggleIncomeOptions">
								<i class="fas fa-caret-down"></i>
							</button>
						</div>
					</div>
					<div class="options-container" id="IncomeType" style="display: none;">
						<label>
							<input type="radio" name="incomeOption" value="wyplata" /> Wyplata
						</label>
						<br />

						<label>
							<input type="radio" name="incomeOption" value="odszkodowanie" /> Odszkodowanie
						</label>
						<br />
						<label>
							<input type="radio" name="incomeOption" value="inne" /> Inne
						</label>
					</div>
				</div>


				<div class="form-group mb-3">
					<label class="control-label" for="IncomeDate">
						Income Date
					</label>
					<input style="text-align:center" class="form-control bg-light text-white" type="text" id="IncomeDate" name="BudgetIncome.IncomeDate" placeholder="Select date" data-input>
				</div>

				<div class="form-group mb-3">
					<label class="control-label" for="IncomeValue">
						Income Value
					</label>
					<input style="text-align:center" class="form-control bg-light text-white" type="text" id="IncomeValue" name="BudgetIncome.IncomeValue" placeholder="Provide income value" />
				</div>

				<div class="form-group mb-3">
					<Button type="submit" class=" btn btn-primary">
						Add InNcome
					</Button>
					@*<Button type="submit" class = "btn btn-primary"> Cancel</Button> zrefaktorować - dodać przycisk Cancel, wraz z redirectem do strony głównej/ gdzie indziej*@
				</div>
			</form>
		</div>
	</div>

	<script>
		flatpickr('#IncomeDate', {
			enableTime: false,
			dateFormat: 'Y-m-d',
		});
		var incomeTypeInput = document.getElementById("IncomeType");
		var incomeTypeOptions = document.getElementById("IncomeTypeOptions");
		var toggleButton = document.getElementById("toggleIncomeOptions");

		toggleButton.addEventListener("click", function () {
			incomeTypeOptions.style.display = incomeTypeOptions.style.display === "none" ? "block" : "none";
		});

		document.querySelectorAll("#IncomeTypeOptions input[type='radio']").forEach(function (radio) {
			radio.addEventListener("change", function () {
				incomeTypeInput.value = this.value;
				incomeTypeOptions.style.display = "none"; 
			});
		});
	</script>
}
