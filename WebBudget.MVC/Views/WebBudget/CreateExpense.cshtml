@{
	Layout = "_Layout";
}

@section containerContent {
	<head>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.6/dist/flatpickr.min.css">
		<script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.6/dist/flatpickr.min.js"></script>


	</head>
	<h1> Add Income </h1>

	<hr />

	<div class="row">

		<div class="col-md-4 mx-auto">
			<form action="/WebBudget/CreateExpense" method="post">
				<div class="form-group mb-3">
					<label class="control-label" for="ExpenseType">
						Expense Category
					</label>
					<div class="input-group">
						<input class="form-control bg-light text-white custom-input text-align:center" type="text" id="ExpenseType" name="ExpenseType" placeholder="Provide expense type" readonly />
						<div class="input-group-append">
							<button class="btn btn-secondary" type="button" id="toogleExpenseTypes">
								<i class="fas fa-caret-down"></i>
							</button>
						</div>
					</div>
					<div class="options-container" id="ExpenseTypeOptions" style="display: none;">
						<div class="row">
							<div class="col-md-6">
								<label>
									<input type="radio" name="incomeOption" value="Fridge" /> Fridge
								</label>
							</div>
							<div class="col-md-6">
								<label>
									<input type="radio" name="incomeOption" value="Taxes" /> Taxes
								</label>
							</div>
						</div>
						<div class="row">
							<div class="col-md-6">
								<label>
									<input type="radio" name="incomeOption" value="Another" /> Another(provide)
								</label>
							</div>
							<div class="col-md-6">
								<label>
									<input type="radio" name="incomeOption" value="Cigarettes" /> Cigarettes
								</label>
							</div>
						</div>
					</div>
				</div>

				<div class="form-group mb-3">
					<label class="control-label" for="ExpenseDate">
						Expense Date
					</label>
					<input style="text-align:center" class="form-control bg-light text-white" type="text" id="ExpenseDate" name="ExpenseDate" placeholder="Select date" data-input>
				</div>

				<div class="form-group mb-3">
					<label class="control-label" for="ExpenseValue">
						Expense Value
					</label>
					<input style="text-align:center" class="form-control bg-light text-white" type="text" id="ExpenseValue" name="ExpenseValue" placeholder="Provide expense value" />
				</div>

				<div class="form-group mb-3">
					<Button type="submit" class=" btn btn-primary">
						Add Expense
					</Button>
					@*<Button type="submit" class = "btn btn-primary"> Cancel</Button> zrefaktorować - dodać przycisk Cancel, wraz z redirectem do strony głównej/ gdzie indziej*@
				</div>
			</form>
		</div>
	</div>

	<script>
		flatpickr('#ExpenseDate', {
			enableTime: false,
			dateFormat: 'Y-m-d',
		});

		var expenseTypeInput = document.getElementById("ExpenseType");
		var toggleButton = document.getElementById("toogleExpenseTypes");
		var ExpenseTypeOptions = document.getElementById("ExpenseTypeOptions");

		toggleButton.addEventListener("click", function () {
			ExpenseTypeOptions.style.display = ExpenseTypeOptions.style.display === "none" ? "block" : "none";
			if (ExpenseTypeOptions.style.display === "block") {
				document.querySelectorAll("#ExpenseTypeOptions input[type='radio']").forEach(function (radio) {
					radio.addEventListener("change", function () {
						if (this.value === "Another") {
							expenseTypeInput.removeAttribute("readonly");
							expenseTypeInput.value = "";
						} else {
							expenseTypeInput.setAttribute("readonly", true);
							expenseTypeInput.value = this.value;
						}
						ExpenseTypeOptions.style.display = "none";
					});
				});
			}
		});

	</script>
}
